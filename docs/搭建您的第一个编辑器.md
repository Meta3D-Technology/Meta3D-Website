---
sidebar_position: 3
---

# 搭建您的第一个编辑器

在本文中，您将学习到：

- 如何获得编辑器需要的扩展、贡献
- 如何搭建编辑器页面
- 如何运行编辑器页面
- 如何组合获得的扩展、贡献为编辑器
- 如何发布编辑器
- 如何运行编辑器

我们将搭建一个最简单的编辑器：只有一个窗口UI

我们将发布编辑器到平台上，在线运行的截图如下：
![运行编辑器.png](/img/搭建您的第一个编辑器/运行编辑器.png)

## 先决条件

您需要先登录，具体请参考：[如何登录](快速预览#登录)


下面我们来一步步操作：
## 获得需要的扩展、贡献 

编辑器由扩展组成，而部分的扩展又需要贡献，所以需要从市场获得这些扩展和贡献

这个编辑器需要下面的扩展：
- most（实现的协议名：most protocol）
因为我们使用[FRP](https://www.infoq.cn/article/functional-reactive-programming/)来处理异步，所以需要使用[most.js库](https://github.com/cujojs/most)来实现FRP。
该扩展使用Rescript语言封装该库，提供了FRP相关的服务
- event（实现的协议名：event protocol）
该扩展提供了事件相关的服务
- imgui-webgl1-renderer（实现的协议名：renderer protocol）
因为我们使用IMGUI模式来绘制应用的页面，所以需要使用[imgui库](https://github.com/ocornut/imgui)。
该扩展使用Typescript语言封装该库
- immutable（实现的协议名：immutable protocol）
因为我们基于[函数式编程范式](https://coolshell.cn/articles/10822.html)来开发扩展和贡献，所以需要immutable的数据结构。
该扩展使用Typescript语言封装[immutable.js库](https://immutable-js.com/)
- ui（实现的协议名：ui protocol）
该扩展封装了imgui-webgl1-renderer扩展，提供了绘制应用的页面的服务
- webgl1（实现的协议名：webgl1 protocol）
该扩展封装了WebGL1的浏览器API
- run-engine-empty（实现的协议名：run engine protocol）
- use empty（实现的协议名：use editor protocol）
该扩展为应用的启动扩展

我们首先进入扩展市场；然后通过点击扩展对应的协议名来显示实现了该协议的扩展；然后选择该扩展。


这个编辑器需要下面的贡献：
- window（实现的协议名：window protocol）
该贡献属于UIControl类型，调用了ui扩展中关于窗口的绘制API

我们首先进入贡献市场；然后通过点击贡献对应的协议名来显示实现了该协议的贡献；然后选择该贡献。


## 搭建编辑器页面

现在我们来可视化地搭建编辑器页面

我们进入装配空间后，需要依次选中我们在市场上选择的扩展和贡献，具体操作为：
- 点击左侧的Extensions，从而显示出所有选择的扩展，然后依次点击每个扩展一次
![Extensions.png](/img/搭建您的第一个编辑器/Extensions.png)
- 点击左侧的Contributes，从而显示出所有选择的贡献，然后依次点击每个贡献一次
![Contributes.png](/img/搭建您的第一个编辑器/Contributes.png)
- 点击左侧的Selected Extensions和Selected Contributes，可以看到我们选中了所有的扩展和贡献
![Selected.png](/img/搭建您的第一个编辑器/Selected.png)


在下图红框处，设置页面的宽度为800px，高度为600px
![设置画布大小.png](/img/搭建您的第一个编辑器/设置画布大小.png)

点击下图的红框来进入Element装配：
![进入Element装配.png](/img/搭建您的第一个编辑器/进入Element装配.png)

- 点击UI Controls中的Window控件一次，将其加入到页面上
![选中window.png](/img/搭建您的第一个编辑器/选中window.png)
- 点击左侧的Selected UI Controls，显示所有选中的控件，点击该选中的控件，右侧显示出控件的面板
![显示面板.png](/img/搭建您的第一个编辑器/显示面板.png)
其中控件面板中的Rect区域设置控件的位置、大小；IsDraw区域设置是否显示控件；Specific区域设置该控件的协议中定义的专有属性；Event区域设置该控件绑定的Action。
目前我们不操作控件的面板。


## 运行编辑器页面

我们可以通过下面的步骤在线运行页面，查看实际的效果：
- 点击红框的运行按钮
![运行.png](/img/搭建您的第一个编辑器/运行.png)

可以看到开了一个新的tab，运行了该页面：
![运行结果.png](/img/搭建您的第一个编辑器/运行结果.png)

可以在这个tab中通过浏览器控制台调试代码 



## 发布编辑器页面

我们需要通过下面的步骤将该页面作为贡献，发布到贡献市场：
- 点击红框的发布Element按钮，输入页面的名称和版本号，其中版本号应该符合[semver规范](https://semver.org/lang/zh-CN/)（e.g. 0.0.1），然后点击发布按钮进行发布
![发布Element.png](/img/搭建您的第一个编辑器/发布Element.png)


## 选择编辑器页面贡献

我们需要进入贡献市场，选择刚刚发布的页面贡献：
- 进入贡献市场，找到协议element assemble element protocol，点击title进入后选择发布的页面贡献


## 搭建编辑器

现在我们要搭建编辑器：
- 进入装配空间
- 重新选中所有的扩展和贡献
- 在左侧的Selected Extensions中，点击use empty扩展，右侧出现启动按钮，点击该按钮将其设为启动扩展
![启动扩展.png](/img/搭建您的第一个编辑器/启动扩展.png)
- 设置页面的宽度为800px，高度为600px

## 发布编辑器

现在我们将编辑器发布到平台上：
- 点击红框的发布按钮，输入应用名和介绍后，点击发布
![发布编辑器.png](/img/搭建您的第一个编辑器/发布编辑器.png)

## 运行编辑器

现在我们在线运行编辑器：
- 进入发布的应用，点击应用名
![查看应用.png](/img/搭建您的第一个编辑器/查看应用.png)

可以看到开了一个新的tab，运行了该编辑器

可以在这个tab中通过浏览器控制台调试代码 